sequenceDiagram
    participant Client
    participant API as /api/transactions
    participant Auth as AuthorizationMiddleware
    participant Db as FinancetrackerContext
    participant Email as IEmailService

    Client->>API: POST /api/transactions (Authorization: Bearer <token>)
    API->>Auth: validate token -> get userId
    Auth-->>API: userId
    API->>Db: Verify category exists and belongs to user or is public
    Db-->>API: category exists
    API->>Db: INSERT Transaction
    Db-->>API: Transaction saved
    API->>Email: NotifyBudgetsForTransactionAsync(transaction)
    Email-->>API: notifications queued/sent
    API-->>Client: 201 Created { transaction with nested Category, User }
